From dfa5db37cb00519d1a5a0fefcafe7ec6e3ab6394 Mon Sep 17 00:00:00 2001
From: Jan Holthuis <jan.holthuis@ruhr-uni-bochum.de>
Date: Fri, 19 Aug 2022 17:20:00 +0200
Subject: [PATCH] [0.34-0.36] Backport Makefile `install` rule from 0.37

Without these fixes, `make install` does not create the bindir/sbindir
automatically. For example, if sbindir does not exist, dropbear won't be
installed to `sbin/dropbear`. Instead, a file named `sbin` is created.
This fixes the issue by just copying the install rule from version 0.37.
---
 Makefile.in | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/Makefile.in b/Makefile.in
index 064773d..ac0a2bd 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -46,6 +46,8 @@ strip:
 	-strip dropbearconvert

 install: all
+	install -d -m 755 $(DESTDIR)$(sbindir)
+	install -d -m 755 $(DESTDIR)$(bindir)
 	install -m 755 dropbear $(DESTDIR)$(sbindir)
 	install -m 755 dropbearkey $(DESTDIR)$(bindir)
 	install -m 755 dropbearconvert $(DESTDIR)$(bindir)
--
2.37.1
