From 97d22efe733de9bfdb28cd19a17de293c30e35c2 Mon Sep 17 00:00:00 2001
From: Jan Holthuis <jan.holthuis@ruhr-uni-bochum.de>
Date: Fri, 19 Aug 2022 12:26:00 +0200
Subject: [PATCH] [0.2x-0.31] Add missing `install` rule to `Makefile.in`

Dropbear versions prior to 0.33 don't have an `install` rule in their
Makefile, so `make install` will fail. This adds such a rule to all
versions <0.32 to make it easier to install the binaries. For version
0.32, a separate patch is necessary.
---
 Makefile.in | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/Makefile.in b/Makefile.in
index b3306e8..5a8ec97 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -49,3 +49,12 @@ clean:

 tidy:
 	-rm -f *~ *.gcov
+
+sbindir=/sbin
+bindir=/bin
+
+install: all
+	install -m 755 dropbear $(DESTDIR)$(sbindir)
+	install -m 755 dropbearkey $(DESTDIR)$(bindir)
+	-chown root.root $(DESTDIR)$(sbindir)/dropbear
+	-chown root.root $(DESTDIR)$(bindir)/dropbearkey
--
2.37.1
