From 1e87b0399c6fdfa3696bc6529f417cf606a504da Mon Sep 17 00:00:00 2001
From: Jan Holthuis <jan.holthuis@ruhr-uni-bochum.de>
Date: Fri, 19 Aug 2022 14:10:16 +0200
Subject: [PATCH] [0.32] Add missing `install` rule to `Makefile.in`

Dropbear 0.32 don't have an `install` rule in their Makefile, so `make
install` will fail. This adds such a rule make it easier to install the
binaries.

Unfortunately, the patch for previous version won't apply cleanly, which
is why this comes a separate patch.
---
 Makefile.in | 9 +++++++++
 1 file changed, 9 insertions(+)

diff --git a/Makefile.in b/Makefile.in
index be77665..ceabec8 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -69,3 +69,12 @@ clean: ltc-clean ltm-clean

 tidy:
 	-rm -f *~ *.gcov */*~
+
+sbindir=/sbin
+bindir=/bin
+
+install: all
+	install -m 755 dropbear $(DESTDIR)$(sbindir)
+	install -m 755 dropbearkey $(DESTDIR)$(bindir)
+	-chown root.root $(DESTDIR)$(sbindir)/dropbear
+	-chown root.root $(DESTDIR)$(bindir)/dropbearkey
--
2.37.1
